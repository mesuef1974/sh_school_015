{% extends "_base_maronia.html" %}
{% block title %}{{ title }}{% endblock %}
{% block content %}
  <style>
    /* حجم ومحاذاة الأيقونات المتحركة */
    .anim-icon { width: 28px; height: 28px; vertical-align: -6px; margin-inline: .25rem; }
    .anim-sm { width: 22px; height: 22px; vertical-align: -4px; }
    .li-fallback { display:none; }
    /* إذا تعذّر تحميل مكتبة lordicon، أظهر بديل Bootstrap */
    html:not(.lordicon-ready) .li-fallback { display:inline; }
    html:not(.lordicon-ready) lord-icon { display:none; }

    /* شبكة الأيقونات المربعة (٧ في كل صف على الشاشات الكبيرة) */
    .icon-grid{ display:grid; gap: 1.35rem; grid-template-columns: repeat(2, minmax(0,1fr)); align-items: stretch; }
    @media (min-width: 576px){ .icon-grid{ grid-template-columns: repeat(3, 1fr); } }
    @media (min-width: 768px){ .icon-grid{ grid-template-columns: repeat(4, 1fr); } }
    @media (min-width: 992px){ .icon-grid{ grid-template-columns: repeat(5, 1fr); } }
    @media (min-width: 1200px){ .icon-grid{ grid-template-columns: repeat(7, 1fr); } }
    /* اجعل أغلفة bootstrap للأعمدة شفافة للغريد حتى لا تُفسد توزيع المربعات */
    .icon-grid > [class*="col-"]{ display: contents; }
    .icon-grid a{ text-decoration: none; color: inherit; }
    .icon-grid .card{ width: 100%; aspect-ratio: 1 / 1; display:flex; border-radius: 16px; border: 1px solid rgba(0,0,0,.08); box-shadow: 0 6px 14px rgba(0,0,0,.06); background: rgba(255,255,255,.75); backdrop-filter: blur(4px); transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease; }
    .icon-grid .card.card-hover:hover{ transform: translateY(-6px); box-shadow: 0 16px 34px rgba(0,0,0,.14); border-color: rgba(0,0,0,.12); }
    .icon-grid .card:focus-within{ outline: 2px solid var(--bs-primary,#0d6efd); outline-offset: 2px; }
    .icon-grid .card-body{ display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding: 1.1rem; }
    .icon-grid .badge{ display:none; }
    /* تكبير الأيقونة والنص داخل البطاقات مع اعتناء بالقراءة */
    .icon-grid .anim-icon{ width: 44px; height: 44px; margin-inline: 0; margin-bottom: .55rem; vertical-align: 0; }
    .icon-grid .fw-bold{ font-size: 1.1rem; letter-spacing: .1px; line-height: 1.25; }
    .icon-grid .text-muted.small{ font-size: .95rem; opacity: .96; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

    /* بطاقات الجداول */
    .tbl-card .badge { border-radius: 999px; }
    .card-hover{ transition: transform .12s ease, box-shadow .12s ease; }
    .card-hover:hover{ transform: translateY(-2px); box-shadow: 0 10px 26px rgba(0,0,0,.08); }
    /* طباعة: إخفاء عناصر الواجهة والتركيز على المحتوى */
    @media print{
      .page-header, nav, .btn, .input-group { display: none !important; }
      .card { box-shadow: none !important; border: 1px solid #ccc; }
    }
  </style>
  <script>
    // وسم الـ HTML عند نجاح تحميل مكتبة lordicon (موجودة في القالب الأساسي)
    window.addEventListener('DOMContentLoaded', function(){
      if (window.lordicon) { document.documentElement.classList.add('lordicon-ready'); }
    });
  </script>
  <div class="d-flex align-items-center justify-content-between mb-4 page-header" data-aos="fade-down">
    <div>
      <h1 class="h3 mb-1 d-flex align-items-center gap-2">
        <lord-icon class="anim-icon" src="https://cdn.lordicon.com/cqofjexf.json" trigger="hover" colors="primary:#c49a6c,secondary:#7b1e1e" aria-label="قاعدة البيانات"></lord-icon>
        <i class="bi bi-database-fill text-accent me-1 li-fallback"></i>
        معاينة قاعدة البيانات
      </h1>
      <div class="text-muted small">كل الجداول ومحتوياتها</div>
    </div>
    <div class="d-none d-md-flex gap-2">
      <a class="btn btn-sm btn-outline-secondary" href="{% url 'data_relations' %}" data-bs-toggle="tooltip" data-bs-title="خريطة العلاقات"><i class="bi bi-diagram-3"></i></a>
      <a class="btn btn-sm btn-outline-secondary" href="{% url 'data_db_audit' %}" data-bs-toggle="tooltip" data-bs-title="تدقيق القاعدة"><i class="bi bi-clipboard2-check"></i></a>
      <a class="btn btn-sm btn-outline-secondary" href="/admin/" target="_blank" data-bs-toggle="tooltip" data-bs-title="لوحة الإدارة"><i class="bi bi-shield-lock"></i></a>
    </div>
  </div>

  <!-- روابط سريعة (الأيقونات المتبقية فقط) -->
  <div class="icon-grid mb-4" data-aos="fade-up">
    <div class="col-md-6 col-lg-4">
      <a class="text-decoration-none" href="{% url 'data_icons_catalog' %}">
        <div class="card card-hover h-100">
          <div class="card-body d-flex align-items-start justify-content-between">
            <div>
              <div class="fw-bold">
                <lord-icon class="anim-icon" src="https://cdn.lordicon.com/vspbqszr.json" trigger="hover" colors="primary:#8a1538,secondary:#c49a6c" aria-label="أيقونات"></lord-icon>
                <i class="bi bi-ui-checks-grid text-accent me-1 li-fallback"></i>
                منظومة الأيقونات والصلاحيات (RBAC)
              </div>
              <div class="text-muted small">جميع الأيقونات المقترحة مع وصف وروابط وصلاحيات</div>
            </div>
            <span class="badge bg-accent-subtle text-accent">فتح</span>
          </div>
        </div>
      </a>
    </div>
    <div class="col-md-6 col-lg-4">
      <a class="text-decoration-none" href="{% url 'data_relations' %}">
        <div class="card card-hover h-100">
          <div class="card-body d-flex align-items-start justify-content-between">
            <div>
              <div class="fw-bold">
                <lord-icon class="anim-icon" src="https://cdn.lordicon.com/qtqvorle.json" trigger="hover" colors="primary:#c49a6c,secondary:#7b1e1e" aria-label="العلاقات"></lord-icon>
                <i class="bi bi-diagram-3-fill text-accent me-1 li-fallback"></i>
                خريطة علاقات قاعدة البيانات
              </div>
              <div class="text-muted small">رسم ER يوضّح الترابط بين الجداول</div>
            </div>
            <span class="badge bg-accent-subtle text-accent">فتح</span>
          </div>
        </div>
      </a>
    </div>
    <div class="col-md-6 col-lg-4">
      <a class="text-decoration-none" href="{% url 'data_db_audit' %}">
        <div class="card card-hover h-100">
          <div class="card-body d-flex align-items-start justify-content-between">
            <div>
              <div class="fw-bold">
                <lord-icon class="anim-icon" src="https://cdn.lordicon.com/uecgmesg.json" trigger="hover" colors="primary:#198754,secondary:#0a3622" aria-label="تدقيق"></lord-icon>
                <i class="bi bi-clipboard2-check text-success me-1 li-fallback"></i>
                تدقيق أفضل الممارسات
              </div>
              <div class="text-muted small">اقتراحات قيود وفهارس لتحسين الأداء والجودة</div>
            </div>
            <span class="badge bg-success-subtle text-success">فتح</span>
          </div>
        </div>
      </a>
    </div>
    <div class="col-md-6 col-lg-4">
      <a class="text-decoration-none" href="{% url 'teacher_week_matrix' %}">
        <div class="card card-hover h-100">
          <div class="card-body d-flex align-items-start justify-content-between">
            <div>
              <div class="fw-bold">
                <lord-icon class="anim-icon" src="https://cdn.lordicon.com/mecwbjnp.json" trigger="hover" colors="primary:#198754,secondary:#0a3622" aria-label="التقويم"></lord-icon>
                <i class="bi bi-calendar3 text-success me-1 li-fallback"></i>
                جدول المعلّمين الأسبوعي (أيام × حصص)
              </div>
              <div class="text-muted small">تفاعلي — إضافة ونقل الحصص بالسحب والإفلات</div>
            </div>
            <span class="badge bg-success-subtle text-success">فتح</span>
          </div>
        </div>
      </a>
    </div>
    <div class="col-md-6 col-lg-4">
      <a class="text-decoration-none" href="{% url 'teacher_week_compact' %}">
        <div class="card card-hover h-100">
          <div class="card-body d-flex align-items-start justify-content-between">
            <div>
              <div class="fw-bold">
                <lord-icon class="anim-icon" src="https://cdn.lordicon.com/abwrkdvl.json" trigger="hover" colors="primary:#6c757d,secondary:#343a40" aria-label="جدول"></lord-icon>
                <i class="bi bi-table text-secondary me-1 li-fallback"></i>
                جدول المعلّمين — عرض مضغوط
              </div>
              <div class="text-muted small">شكل شبكي للطباعة (أيام × ٧ حصص)</div>
            </div>
            <span class="badge bg-secondary-subtle text-secondary">فتح</span>
          </div>
        </div>
      </a>
    </div>
    <div class="col-md-6 col-lg-4">
      <a class="text-decoration-none" href="{% url 'teacher_class_matrix' %}">
        <div class="card card-hover h-100">
          <div class="card-body d-flex align-items-start justify-content-between">
            <div>
              <div class="fw-bold">
                <lord-icon class="anim-icon" src="https://cdn.lordicon.com/qwjfapmb.json" trigger="hover" colors="primary:#0d6efd,secondary:#052c65" aria-label="مصفوفة"></lord-icon>
                <i class="bi bi-grid-3x3-gap-fill text-primary me-1 li-fallback"></i>
                مصفوفة الأنصبة (معلّم × صف)
              </div>
              <div class="text-muted small">عرض شامل مع تعديل سريع للأعداد</div>
            </div>
            <span class="badge bg-primary-subtle text-primary">فتح</span>
          </div>
        </div>
      </a>
    </div>
    <div class="col-md-6 col-lg-4">
      <a class="text-decoration-none" href="/admin/">
        <div class="card card-hover h-100">
          <div class="card-body d-flex align-items-start justify-content-between">
            <div>
              <div class="fw-bold">
                <lord-icon class="anim-icon" src="https://cdn.lordicon.com/akbwczov.json" trigger="hover" colors="primary:#212529,secondary:#000000" aria-label="لوحة التحكم"></lord-icon>
                <i class="bi bi-shield-lock-fill text-dark me-1 li-fallback"></i>
                لوحة تحكم المدير
              </div>
              <div class="text-muted small">إدارة البيانات والتكليفات</div>
            </div>
            <span class="badge bg-dark-subtle text-dark">فتح</span>
          </div>
        </div>
      </a>
    </div>
  </div>


  {# تم إخفاء شبكة الجداول نهائيًا حسب الطلب لعرض الأيقونات المختارة فقط. #}

{% endblock %}
