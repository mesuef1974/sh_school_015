# ๐งญ ูุฑูุฒ ุงูุฃูุงูุฑ ุงูุชูููุฐู (Commands Hub)

> ุฏููู ููุญูุฏ ูุชุดุบูู ุงูุฃูุงูุฑ ุงูุฃูุซุฑ ุงุณุชุฎุฏุงููุง ูู ุงููุดุฑูุน ูุน ุญูุงุฌุฒ ุฃูุงู ูุชุนูููุงุช ูุงุถุญุฉ. ููุฌูู ูุจูุฆุฉ Windows/PowerShell.

- ูุณุงุฑ ุณุฑูุน: ุงุณุชุฎุฏู ุงููุดุบูู ุงูููุญูุฏ scripts/exec_hub.ps1
- ุงููุถุน ุงูุขูู: ุฌุฑูุจ ุฃู ูููุฉ ูุน -WhatIf ูุจู ุงูุชูููุฐ ุงููุนูู
- ุงูุชุฃููุฏ: ููููุงู ุงูุฎุทุฑุฉ ุณุชุทูุจ -Confirm ุจุดูู ุตุฑูุญ

---

## 0) ุงููุชุทูุจุงุช ุงูุฃูููุฉ
- Python 3.11+
- Docker Desktop (ููู PostgreSQL ูRedis)
- Node.js (ุฅู ููุช ุณุชุดุบูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ Vite)

ุชุดุบูู ูุญุต ูุง ูุจู ุงูุชูููุฐ:

```powershell
pwsh -File scripts/preflight.ps1
```

---

## 1) ููุงู ุดุงุฆุนุฉ ุนุจุฑ ุงููุดุบูู ุงูููุญูุฏ

```powershell
# ุนุฑุถ ุฌููุน ุงูููุงู ุงููุชุงุญุฉ
pwsh -File scripts/exec_hub.ps1 -List

# ุชุดุบูู ุฅุนุฏุงุฏ ุงูุจูุฆุฉ (venv + ุฃุฏูุงุช dev)
pwsh -File scripts/exec_hub.ps1 dev:setup

# ุชุดุบูู ุงูุจูุฆุฉ ุจุงููุงูู (Postgres/Redis/Migrations/RQ/HTTPS)
pwsh -File scripts/exec_hub.ps1 dev:up

# ุชุดุบูู ุงูุจุงู ูุงููุฑููุช ูุนูุง (https + vite)
pwsh -File scripts/exec_hub.ps1 dev:all

# ุชุดุบูู ุนุงูู ุงูููุงู RQ ุนูู ุทุงุจูุฑ default
pwsh -File scripts/exec_hub.ps1 worker:start

# ุชุฏููู ุดุงูู ูููุธุงู
pwsh -File scripts/exec_hub.ps1 audit:full

# ุงุฎุชุจุงุฑ ุฌุงูุฒูุฉ HTTPS (Smoke)
pwsh -File scripts/exec_hub.ps1 smoke:test

# ุงุฎุชุจุงุฑ ุชุฏูู JWT (Login Test)
# ุณููุทูุจ ููู ุฅุฏุฎุงู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑุ ุฃู ูุฑุฑูุง ูุฏูููุง ุฅูู ุงูุณูุฑุจุช ูุจุงุดุฑุฉู
pwsh -File scripts/exec_hub.ps1 login:test

# ุชูููู ุชูุฑูุฑ ุงูุฎูุงุฑุงุช ุฅูู ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู ุนุจุฑ exec_hub:
# ุฃูุซูุฉ:
# - ุชุญุฏูุฏ BaseUrl ูุฏูููุง (ุจุฏูู ุฃู ูุน https:// ููุน/ุจุฏูู ุณูุงุด)
# - ุชูุฑูุฑ ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ ูุจุงุดุฑุฉ (ููุตุญ ุจุงุณุชุฎุฏุงู ูุงูุฐุฉ ุฅุฏุฎุงู ุนูุฏ ูุดุงุฑูุฉ ุงูุดุงุดุฉ)

pwsh -File scripts/exec_hub.ps1 login:test -BaseUrl 127.0.0.1:8443 -Username mesuef
# ุณูุทูุจ ูููุฉ ุงููุฑูุฑ ููุท

pwsh -File scripts/exec_hub.ps1 login:test -BaseUrl https://127.0.0.1:8443/ -Username admin -Password "P@ssw0rd" -SkipCertificateCheck

# ูุซุงู ุนูู ุชุฌุฑุจุฉ ุจุฏูู ุชูููุฐ (ูุญุงูุงุฉ)
pwsh -File scripts/exec_hub.ps1 dev:up -WhatIf
```

---

## 2) ุงููุฆุงุช ูุงูุฃูุงูุฑ (ูุจุงุดุฑุฉ)

### ุงูุจูุฆุฉ Environment
- scripts/dev_setup.ps1: ุฅูุดุงุก/ุฅุตูุงุญ venv + black/flake8 + ูุญุต gen_index.py
- scripts/preflight.ps1: ูุญูุต ุณุฑูุนุฉ ููุฃุฏูุงุช (Python/Docker/Node)

### ุงูุจููุฉ Backend
- scripts/dev_up.ps1: ุชุดุบูู PostgreSQL/Redis ูุชุทุจูู ุงูุชุฑุญููุงุช ูุชุดุบูู HTTPS ูRQ
- scripts/full_audit.ps1: check + showmigrations + migrate --check + healthcheck
- backend/manage.py ensure_superuser: ุฅูุดุงุก ูุดุฑู (ููุฏุงุฑ ุฏุงุฎู dev_up)
- bootstrap_rbac / ensure_staff_users / activate_staff_users (ุฃูุถู ุฌูุฏ)

### ุงููุงุฌูุฉ Frontend
- scripts/dev_all.ps1: ุชุดุบูู ุงูุณูุฑูุฑ ุงูุฎููู ุซู Vite dev server
- frontend: npm install ุซู npm run dev (ููุฏุงุฑ ุฏุงุฎู dev_all)

### ุงูุนูุงู Workers
- scripts/rq_worker.ps1 -Queue <name>: ุชุดุบูู ุนุงูู ุงูููุงู RQ

---

## 3) ุณูุงุณุฉ ุงูุฃูุงู ูุงูุชูููุฐ
- ูุง ุชูุดุบูู ููุงู ูุฏ ุชูุบููุฑ ุจูุงูุงุช ุงูุฅูุชุงุฌ ูู ุฌูุงุฒ ุงููุทูุฑ. ูุฐุง ุงูุฏููู ููุฌูู ูุจูุฆุฉ ุงูุชุทููุฑ.
- ุงุณุชุฎุฏู -WhatIf ูููุฑุงุฌุนุฉ ุฃูููุง. ูู ุชููููุฐ ุงูุฃูุงูุฑ ุงููุนููุฉ ูู ูุฐุง ุงููุถุน.
- ุจุนุถ ุงูููุงู ูุฏ ุชุชุทูุจ -Confirm: ูุงูู ุตุฑุงุญุฉู ุนูู ุงูุชูููุฐ ุญูู ุชูุทูุจ.

---

## 4) ุงุณุชูุดุงู ุงูุฃุฎุทุงุก
- ุชุนุฐูุฑ Python: ุชุฃูุฏ ูู python --version ูุนูู ููู venv .venv ุญุงุถุฑ.
- ุชุนุฐูุฑ Docker: ุงูุชุญ Docker Desktop ุซู ุฃุนุฏ ุงููุญุงููุฉ.
- ูุดู ุงุชุตุงู Redis/Postgres: ุงุณุชุฎุฏู scripts/dev_up.ps1 ูุฅุนุฏุงุฏ ุงูุญุงููุงุช ุฃูููุง.

---

## 5) ุฑูุงุจุท ุณุฑูุนุฉ
- ุฎุทุฉ ุงูุชูููุฐ ุงููุฑุฆูุฉ: DOC/implementation_plan_maroon.html
- ูุงุฆูุฉ ุงูุชูููุฐ ุงููุชุณูุณูุฉ: DOC/ุฎุทุฉ_ุชูููุฐ_ูุชุณูุณูุฉ.md

---

## 1.1) ุงุฎุชุจุงุฑ ุณุฑูุน (Smoke)
ููุชุฃูุฏ ุจุณุฑุนุฉ ูู ุฌุงูุฒูุฉ ุงูุฎุงุฏู ุนุจุฑ HTTPS ูููุงุท ุงูุตุญุฉ ู401 ุงููุชููุน ูููุงุท API ุจุฏูู ุชูุซูู:

```powershell
pwsh -File scripts/dev_smoke.ps1 -HttpsOnly
```

- ูุณุชุฎุฏู ุงููููุฐ HTTPS ุงูููุชุดู ุชููุงุฆููุง ูู backend/.runtime/https_port.txt (ุงูุงูุชุฑุงุถู 8443).
- ูู ุญุงู ุฃุฑุฏุช ุงูุชุญูู ูู HTTP ุฃูุถูุง (ุฅู ูุงู ููุนูููุง)ุ ุฃุฒู ุงูุณููุชุด `-HttpsOnly`.
- ุนูุฏ ุงุฎุชุจุงุฑ ูุฏูู ูููุงุท ุงูู API ุนุจุฑ HTTPSุ ุชุฐููุฑ ุงุณุชุฎุฏุงู `-SkipCertificateCheck` ูุฃู ุงูุดูุงุฏุฉ ุชุทููุฑูุฉ ุฐุงุชูุฉ ุงูุชูููุน.