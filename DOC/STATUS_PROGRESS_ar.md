### حالة بطاقات «مشرف الجناح» — تحديث مختصر

آخر تحديث: 2025-10-31

المُنجز (واجهة + RBAC + شريط عنوان موحّد)
- ✓ صفوف وطلبة (/wing/classes): بحث جناحي، فلاتر/فرز، حالة اليوم، نسخ أرقام، CSV، عمود الصف.
- ✓ طلبات الاعتماد (/wing/approvals): إجراءات صفية/مجمّعة، RBAC، مزامنة رابط، تحديث جزئي، aria-live.
- ✓ تنبيهات الغياب O/X (/wing/absences): حساب/إصدار، تنزيل Word، تحديث فوري لقائمة التنبيهات، RBAC، تحقّق التاريخ.
- ✓ الغياب اليومي (/wing/attendance/daily): مُرشّح الصف، CSV، فلترة Open Exits بالـ wing، رأس موحّد.
- ✓ أذونات الخروج (/wing/exits): بطاقات حسب الطالب، مرشّحات، اعتماد/رفض فردي/جماعي، رأس موحّد، إزالة dayjs.
- ✓ شريط العنوان والأيقونات: WingPageHeader، تكبير أيقونات 2x، نص «جناح <رقم> - <اسم> - <اسم المستخدم>» ومنع تكرار الرقم.
- ✓ الصفحة الرئيسية: تنظيم شبكة البلاطات (~98% من العرض) وتصغير الحجم الإجمالي (~30%)، إطار ماروني.
- ✓ بطاقة «حصص بلا إدخال»: صفحة كاملة (تاريخ/صف/تحديث/CSV) مربوطة بـ getWingMissing، وقائمة صفوف مقيّدة بالجناح.
- ✓ تقارير الجناح (/wing/reports): نسخة MVP — بطاقات تنزيل CSV (الطلبة، غيابات اليوم، الحصص المُدخلة، الحصص بلا إدخال) مع مرشّح الصف المقيّد بالجناح.

المتبقّي/قيد التعميق
- • إشعارات الجناح (/wing/notifications): نسخة MVP تعمل الآن وتعرض بيانات فعلية (مربوطة مؤقتًا بقائمة «تنبيهات الغياب») مع شريط عنوان موحّد + بطاقة أدوات (تاريخ/صف/حالة/بحث) + جدول بتحديد متعدد + RBAC وحفظ فلاتر. الأفعال المجمّعة (إرسال/إلغاء/أرشفة) ستُفعّل عند توفير/تأكيد واجهة API الخاصة بالإشعارات.
- • إعدادات الجناح (/wing/settings): تم توسيعها (v2) لتشمل: تاريخ افتراضي، وضع الاعتماد الافتراضي، حالة أذونات الخروج الافتراضية، سلوك مرشح صف الغياب اليومي، إظهار/إخفاء أعمدة الطلبة، إجراءات الاتصال، تضمين رؤوس CSV، تطبيق تلقائي عند فتح الصفحات، واستيراد/تصدير JSON. *
- • تقارير الجناح (/wing/reports): تقارير CSV/PDF/Word (قائمة الطلاب، غياب أسبوعي/شهري) مع مرشّحات وتواريخ.
- • لوحة الجناح (/wing/dashboard): KPIs يوم/أسبوع، تنبيهات مختصرة، روابط سريعة، مؤشرات التزام.
- • جدول الجناح (/wing/timetable): تدقيق المصدر، فلترة (جناح/صف/معلم)، طباعة/تصدير، تحسين العرض.
- • تعميم أزرار CSV حيث يدعم الـ API (?format=csv) خاصة entered/missing.
- • الأداء/Cache: إبراز شارة Cached في الملخصات وحدّ «العرض الجزئي» عند كثرة العناصر.
- • الوصولية (A11y): فحص axe دخاني وإغلاق التحذيرات في كل الصفحات.
- • تدقيق إضافي للسوبر فايزر: تقييد جميع القوائم المنسدلة للصفوف حسب الجناح المختار في أي صفحة إدارية أخرى خارج /wing.

الخطوة المقترحة التالية
- بدء «إشعارات الجناح» (MVP خلال 3–5 ساعات): بطاقة أدوات (تاريخ/صف/حالة/بحث)، جدول بتحديد متعدد، إجراءات مجمّعة، RBAC، حفظ فلاتر، أيقونة وعنوان موحّد.
